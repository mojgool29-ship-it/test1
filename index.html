<!DOCTYPE html>
<html>
<head>
    <title>Real Gifts - –ü—Ä–∏–∑—ã –∑–∞ –∑–≤—ë–∑–¥—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="frame-ancestors https://web.telegram.org;">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .logo {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .subtitle {
            opacity: 0.8;
            font-size: 16px;
        }

        /* –ë–∞–ª–ª–∞–Ω—Å –∑–≤—ë–∑–¥ */
        .balance-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stars-count {
            font-size: 36px;
            font-weight: bold;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .star-icon {
            color: #FFD700;
            font-size: 32px;
        }

        .buy-stars-button {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #333;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }

        /* –ò–≥—Ä–æ–≤–æ–π –∞–≤—Ç–æ–º–∞—Ç */
        .slot-machine {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .slots-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            perspective: 1000px;
        }

        .slot {
            width: 70px;
            height: 70px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transform-style: preserve-3d;
        }

        .slot.spinning {
            animation: spin 0.1s infinite linear;
        }

        @keyframes spin {
            0% { transform: rotateX(0deg); }
            100% { transform: rotateX(360deg); }
        }

        .spin-button {
            background: linear-gradient(135deg, #FF6B6B, #EE5A24);
            color: white;
            border: none;
            padding: 18px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            width: 100%;
            margin: 15px 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .spin-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }

        .spin-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background: #666;
        }

        .spin-cost {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 5px;
        }

        /* –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–∑ */
        .real-prize {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .prize-image {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 15px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .prize-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .prize-description {
            opacity: 0.9;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .delivery-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: left;
        }

        .claim-button {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        /* –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–∏–∑–æ–≤ */
        .prizes-catalog {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .catalog-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .prize-item {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .prize-item-emoji {
            font-size: 32px;
            width: 50px;
            text-align: center;
        }

        .prize-item-info {
            flex: 1;
            margin-left: 15px;
        }

        .prize-item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .prize-item-price {
            color: #FFD700;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* –ò—Å—Ç–æ—Ä–∏—è –≤—ã–∏–≥—Ä—ã—à–µ–π */
        .history {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }

        .history-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .history-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-prize {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-status {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 8px;
        }

        .status-pending { background: rgba(255, 193, 7, 0.3); }
        .status-shipped { background: rgba(33, 150, 243, 0.3); }
        .status-delivered { background: rgba(76, 175, 80, 0.3); }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üéÅ</div>
            <div class="title">Real Gifts</div>
            <div class="subtitle">–í—ã–∏–≥—Ä—ã–≤–∞–π —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑—ã –∑–∞ –∑–≤—ë–∑–¥—ã!</div>
        </div>

        <!-- –ë–∞–ª–ª–∞–Ω—Å –∑–≤—ë–∑–¥ -->
        <div class="balance-card">
            <div>–í–∞—à –±–∞–ª–∞–Ω—Å</div>
            <div class="stars-count">
                <span class="star-icon">‚≠ê</span>
                <span id="starsBalance">100</span>
            </div>
            <button class="buy-stars-button" onclick="buyStars()">
                –ö—É–ø–∏—Ç—å –µ—â—ë –∑–≤—ë–∑–¥—ã
            </button>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π –∞–≤—Ç–æ–º–∞—Ç -->
        <div class="slot-machine">
            <div class="slots-container">
                <div class="slot" id="slot1">?</div>
                <div class="slot" id="slot2">?</div>
                <div class="slot" id="slot3">?</div>
            </div>

            <button class="spin-button" id="spinButton" onclick="spinSlots()">
                <span>üé∞</span>
                –ö–†–£–¢–ò–¢–¨ –ó–ê 10 –ó–í–Å–ó–î
            </button>
            <div class="spin-cost">1 –≤—Ä–∞—â–µ–Ω–∏–µ = 10 –∑–≤—ë–∑–¥</div>
        </div>

        <!-- –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–∑ -->
        <div class="real-prize" id="realPrize">
            <div class="prize-image" id="prizeImage">üéÅ</div>
            <div class="prize-title" id="prizeTitle">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</div>
            <div class="prize-description" id="prizeDescription">–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–∑!</div>

            <div class="delivery-info">
                <strong>–î–æ—Å—Ç–∞–≤–∫–∞:</strong><br>
                ‚Ä¢ –ü—Ä–∏–∑ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ 7 –¥–Ω–µ–π<br>
                ‚Ä¢ –£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –∑–∞—è–≤–∫–µ<br>
                ‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
            </div>

            <button class="claim-button" onclick="claimPrize()">
                üéØ –ü–û–õ–£–ß–ò–¢–¨ –ü–†–ò–ó
            </button>
        </div>

        <!-- –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–∏–∑–æ–≤ -->
        <div class="prizes-catalog">
            <div class="catalog-title">–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏–∑—ã</div>
            <div id="prizesList"></div>
        </div>

        <!-- –ò—Å—Ç–æ—Ä–∏—è –≤—ã–∏–≥—Ä—ã—à–µ–π -->
        <div class="history">
            <div class="history-title">–ú–æ–∏ –≤—ã–∏–≥—Ä—ã—à–∏</div>
            <div id="historyList"></div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();

        // –ë–∞–∑–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–æ–≤
        const realPrizes = [
            {
                id: 1,
                emoji: "üß∏",
                name: "–ü–ª—é—à–µ–≤—ã–π –º–∏—à–∫–∞",
                description: "–ú—è–≥–∫–∏–π –ø–ª—é—à–µ–≤—ã–π –º–∏—à–∫–∞ 30—Å–º",
                image: "üß∏",
                starsCost: 50,
                delivery: "7-10 –¥–Ω–µ–π",
                weight: "300–≥"
            },
            {
                id: 2,
                emoji: "üåπ",
                name: "–ö—Ä–∞—Å–Ω–∞—è —Ä–æ–∑–∞",
                description: "–°–≤–µ–∂–∞—è –∫—Ä–∞—Å–Ω–∞—è —Ä–æ–∑–∞ –≤ —É–ø–∞–∫–æ–≤–∫–µ",
                image: "üåπ",
                starsCost: 30,
                delivery: "2-3 –¥–Ω—è",
                weight: "150–≥"
            },
            {
                id: 3,
                emoji: "üì±",
                name: "–ß–µ—Ö–æ–ª –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞",
                description: "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —á–µ—Ö–æ–ª –¥–ª—è iPhone/Android",
                image: "üì±",
                starsCost: 80,
                delivery: "5-7 –¥–Ω–µ–π",
                weight: "100–≥"
            },
            {
                id: 4,
                emoji: "üéß",
                name: "–ù–∞—É—à–Ω–∏–∫–∏",
                description: "–ü—Ä–æ–≤–æ–¥–Ω—ã–µ –Ω–∞—É—à–Ω–∏–∫–∏ —Å —Ö–æ—Ä–æ—à–∏–º –∑–≤—É–∫–æ–º",
                image: "üéß",
                starsCost: 150,
                delivery: "7-14 –¥–Ω–µ–π",
                weight: "200–≥"
            },
            {
                id: 5,
                emoji: "‚åö",
                name: "–£–º–Ω—ã–µ —á–∞—Å—ã",
                description: "–§–∏—Ç–Ω–µ—Å-–±—Ä–∞—Å–ª–µ—Ç —Å —Ç—Ä–µ–∫–µ—Ä–æ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
                image: "‚åö",
                starsCost: 300,
                delivery: "10-15 –¥–Ω–µ–π",
                weight: "50–≥"
            },
            {
                id: 6,
                emoji: "üìö",
                name: "–ö–Ω–∏–≥–∞",
                description: "–ë–µ—Å—Ç—Å–µ–ª–ª–µ—Ä –≤ —Ç–≤—ë—Ä–¥–æ–º –ø–µ—Ä–µ–ø–ª—ë—Ç–µ",
                image: "üìö",
                starsCost: 120,
                delivery: "5-8 –¥–Ω–µ–π",
                weight: "500–≥"
            },
            {
                id: 7,
                emoji: "üç´",
                name: "–®–æ–∫–æ–ª–∞–¥–Ω—ã–π –Ω–∞–±–æ—Ä",
                description: "–ù–∞–±–æ—Ä –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–≥–æ —à–æ–∫–æ–ª–∞–¥–∞",
                image: "üç´",
                starsCost: 40,
                delivery: "3-5 –¥–Ω–µ–π",
                weight: "250–≥"
            },
            {
                id: 8,
                emoji: "‚úèÔ∏è",
                name: "–ù–∞–±–æ—Ä —Ä—É—á–µ–∫",
                description: "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥–µ–ª–µ–≤—ã–µ —Ä—É—á–∫–∏ 6 —Ü–≤–µ—Ç–æ–≤",
                image: "‚úèÔ∏è",
                starsCost: 25,
                delivery: "4-6 –¥–Ω–µ–π",
                weight: "100–≥"
            }
        ];

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let userData = {
            stars: 100,
            wins: [],
            pendingPrizes: []
        };

        let currentWin = null;
        let isSpinning = false;

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        function loadUserData() {
            const saved = localStorage.getItem('realgifts_userdata');
            if (saved) {
                userData = JSON.parse(saved);
            }
            updateUI();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        function saveUserData() {
            localStorage.setItem('realgifts_userdata', JSON.stringify(userData));
        }

        // –ö—Ä—É—á–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤
        function spinSlots() {
            if (isSpinning) return;

            if (userData.stars < 10) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥! –ö—É–ø–∏—Ç–µ –µ—â—ë.');
                return;
            }

            isSpinning = true;
            userData.stars -= 10;
            document.getElementById('spinButton').disabled = true;

            // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
            const slots = document.querySelectorAll('.slot');
            slots.forEach(slot => slot.classList.add('spinning'));

            // –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à (30% —à–∞–Ω—Å)
            const isWin = Math.random() < 0.3;
            const randomPrize = isWin ? realPrizes[Math.floor(Math.random() * realPrizes.length)] : null;

            setTimeout(() => {
                slots.forEach(slot => slot.classList.remove('spinning'));

                if (isWin && randomPrize) {
                    showWin(randomPrize);
                } else {
                    showLose();
                }

                saveUserData();
                updateUI();
            }, 2000);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à
        function showWin(prize) {
            currentWin = prize;

            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            userData.wins.unshift({
                ...prize,
                date: new Date().toLocaleDateString('ru-RU'),
                status: 'pending'
            });

            document.getElementById('prizeImage').textContent = prize.image;
            document.getElementById('prizeTitle').textContent = `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏: ${prize.name}`;
            document.getElementById('prizeDescription').textContent = prize.description;

            document.getElementById('realPrize').style.display = 'block';
            showNotification(`üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${prize.name}!`);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–∏–≥—Ä—ã—à
        function showLose() {
            showNotification('–ü–æ–≤–µ–∑—ë—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë üçÄ');
            isSpinning = false;
            document.getElementById('spinButton').disabled = false;
        }

        // –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–∑
        function claimPrize() {
            if (!currentWin) return;

            // –ó–¥–µ—Å—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –¥–æ—Å—Ç–∞–≤–∫–∏
            showNotification(`‚úÖ –ó–∞—è–≤–∫–∞ –Ω–∞ ${currentWin.name} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!`);

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
            const winIndex = userData.wins.findIndex(win =>
                win.id === currentWin.id && win.status === 'pending'
            );
            if (winIndex !== -1) {
                userData.wins[winIndex].status = 'claimed';
            }

            document.getElementById('realPrize').style.display = 'none';
            currentWin = null;
            isSpinning = false;
            document.getElementById('spinButton').disabled = false;

            saveUserData();
            updateUI();
        }

        // –ü–æ–∫—É–ø–∫–∞ –∑–≤—ë–∑–¥
        function buyStars() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π Telegram
            const starsPackages = [
                { amount: 50, price: 99 },
                { amount: 100, price: 179 },
                { amount: 200, price: 299 }
            ];

            // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∫—É–ø–∫–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ - Telegram Payments)
            const packageIndex = Math.floor(Math.random() * starsPackages.length);
            const selectedPackage = starsPackages[packageIndex];

            userData.stars += selectedPackage.amount;
            showNotification(`‚úÖ –ö—É–ø–ª–µ–Ω–æ ${selectedPackage.amount} –∑–≤—ë–∑–¥!`);

            saveUserData();
            updateUI();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            document.getElementById('starsBalance').textContent = userData.stars;
            document.getElementById('spinButton').disabled = userData.stars < 10 || isSpinning;

            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–∏–∑–æ–≤
            updatePrizesCatalog();

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏—Å—Ç–æ—Ä–∏—é
            updateHistory();
        }

        // –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–∏–∑–æ–≤
        function updatePrizesCatalog() {
            const prizesList = document.getElementById('prizesList');
            prizesList.innerHTML = '';

            realPrizes.forEach(prize => {
                const item = document.createElement('div');
                item.className = 'prize-item';
                item.innerHTML = `
                    <div class="prize-item-emoji">${prize.emoji}</div>
                    <div class="prize-item-info">
                        <div class="prize-item-name">${prize.name}</div>
                        <div class="prize-item-price">
                            <span>‚≠ê</span> ${prize.starsCost} –∑–≤—ë–∑–¥
                        </div>
                    </div>
                `;
                prizesList.appendChild(item);
            });
        }

        // –ò—Å—Ç–æ—Ä–∏—è –≤—ã–∏–≥—Ä—ã—à–µ–π
        function updateHistory() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';

            if (userData.wins.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; opacity: 0.7;">–ü–æ–∫–∞ –Ω–µ—Ç –≤—ã–∏–≥—Ä—ã—à–µ–π</div>';
                return;
            }

            userData.wins.slice(0, 5).forEach(win => {
                const item = document.createElement('div');
                item.className = 'history-item';

                let statusText = '–û–∂–∏–¥–∞–Ω–∏–µ';
                let statusClass = 'status-pending';

                if (win.status === 'claimed') {
                    statusText = '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω';
                    statusClass = 'status-shipped';
                } else if (win.status === 'delivered') {
                    statusText = '–î–æ—Å—Ç–∞–≤–ª–µ–Ω';
                    statusClass = 'status-delivered';
                }

                item.innerHTML = `
                    <div class="history-prize">
                        <span>${win.emoji}</span>
                        <div>
                            <div>${win.name}</div>
                            <div style="font-size: 12px; opacity: 0.7;">${win.date}</div>
                        </div>
                    </div>
                    <div class="history-status ${statusClass}">${statusText}</div>
                `;
                historyList.appendChild(item);
            });
        }

        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';

            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ç–µ–º—ã
        function updateTheme() {
            if (Telegram.WebApp.colorScheme === 'dark') {
                document.body.style.background = 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        loadUserData();
        updateTheme();
        Telegram.WebApp.onEvent('themeChanged', updateTheme);

        // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram (–ø—Ä–∏–º–µ—Ä)
        function initTelegramIntegration() {
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const user = Telegram.WebApp.initDataUnsafe?.user;
            if (user) {
                console.log('User:', user);
            }

            // –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø–ª–∞—Ç–µ–∂–∞–º
            Telegram.WebApp.onEvent('invoiceClosed', (event) => {
                if (event.status === 'paid') {
                    showNotification('–ü–ª–∞—Ç—ë–∂ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω!');
                }
            });
        }

        initTelegramIntegration();
    </script>
</body>
</html>